<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ali Mhrez, PhD - Model Architectures Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="css/css2.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #403A3A;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* --- MASONRY GRID STYLES --- */
        .masonry-grid {
            /* Basic grid structure: 1 column on mobile, 2 on desktop, 3 on large screens */
            display: grid;
            /* Allow up to 3 columns on larger screens */
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            grid-gap: 1.5rem; /* Gap between items */
            /* Crucial for Masonry look: tell items not to span full columns */
            grid-auto-rows: 10px; /* Small base unit for row sizing */
        }
        .masonry-item {
            /* Span across multiple rows based on the image height */
            /* This is calculated by JS below, but we set an initial span */
            grid-row-end: span 25; /* Initial span to prevent overlap before JS runs */
            border-radius: 0.75rem; /* rounded-xl */
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
        }
        .masonry-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }
        .masonry-item:hover img {
            transform: scale(1.03);
        }

        /* Responsive adjustments for columns */
        /* These media queries define how many columns are available in total */
        @media (min-width: 768px) {
            .masonry-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1024px) {
            .masonry-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Modal transition classes */
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header and Navigation -->
    <header id="header" class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="../index.html" class="text-xl font-bold text-gray-800">Ali Mhrez, PhD</a>
            <!-- Desktop Navigation - Links removed per user request -->
            <div class="hidden md:flex space-x-8">
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu Dropdown - Links removed per user request -->
        <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg border-t border-gray-100">
        </div>
    </header>

    <main>
        <!-- Gallery Section -->
        <section id="gallery" class="py-16 md:py-24 bg-gray-50">
            <!-- Constrained and centered container for the text header (for readability) -->
            <div class="container mx-auto px-6 max-w-7xl mb-12">
                <h1 class="text-5xl font-extrabold text-gray-900 mb-4 text-center">Novel Transformer Architectures</h1>
                <p class="text-xl text-gray-600 text-center">Brainstorm with me: Visual representations of the Transformer architectures I have studied.</p>
            </div>
            
            <!-- Full-width container for the masonry grid -->
            <!-- Use responsive padding (px-6/8/12) to ensure content is not flush against the screen edges -->
            <div class="px-6 sm:px-8 md:px-12 lg:px-16">
                <div id="masonry-container" class="masonry-grid">
                    <!-- Images will be injected here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-2xl font-bold mb-4">Get In Touch</h2>
            <p class="mb-6">Feel free to reach out for collaborations or just a friendly chat.</p>
            <div class="flex justify-center items-center space-x-6">
                <a href="mailto:alisdmhrez@gmail.com" class="hover:text-indigo-400 transition-colors">alisdmhrez@gmail.com</a>
                <a href="https://www.linkedin.com/in/ali-sd-mhrez" target="_blank" class="hover:text-indigo-400 transition-colors">LinkedIn</a>
                <a href="https://github.com/Ali-Mhrez" target="_blank" class="hover:text-indigo-400 transition-colors">GitHub</a>
            </div>
        </div>
    </footer>

    <!-- Modal for Image Description -->
    <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden items-center justify-center p-4 modal-backdrop opacity-0">
        <!-- Added max-h-[90vh] and overflow-y-auto to allow scrolling of the modal content if needed -->
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 relative modal-content scale-95">
            <button id="close-modal-button" class="absolute top-3 right-3 text-gray-500 hover:text-gray-900 bg-gray-100 rounded-full p-1 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="modal-image-container" class="mb-4 text-center">
                <!-- Image goes here -->
            </div>
            <h3 id="modal-title" class="text-2xl font-bold text-gray-900 mb-2"></h3>
            <p id="modal-description" class="text-gray-600"></p>
        </div>
    </div>


    <script>
        // --- Customization Block: Detailed Descriptions ---
        // Use the image's 'alt' text as the key to look up the specific details.
        const imageDetails = {
            "Coupled Hierarchical Transformer": {
                caption: "2020.cht ",
                description: "<li><b>Local Context Encoding (LCE):</b> Capture local interactions between subthreads (i.e., subset of posts inside the conversation).</li>"
						   + "<li><b>Global Context Encoding (GCE):</b> Capture global interactions in the entire conversation and construct a representation of the full conversation thread.</li>"
						   + "<li><b>Coupled Transformer Module:</b> Contain stance-specific Transformer and a cross-task Transformer to model inter task (i.e., stance detection and rumour verification) interactions.</li>"
						   + "<li><b>Post-Level Attention:</b> Obtain a stance label-aware thread representation.</li>"
            },
			"Hierarchical Multi-modal Contextual Attention Network": {
                caption: "2021.hmcan ",
                description: "<li><b>Hierarchical Encoding Network:</b> Capture input text tokens' representations from BERT multiple layers.</li>"
						   + "<li><b>Multi-modal Contextual Attention Network:</b> Learn multi-modal context-aware text representation and multi-modal context-aware image representation.</li>"
            }
        };


        // --- Gallery Data (Visual Properties Only) ---
        // **CONTROL THE SIZE BY CHANGING THE 'width', 'height', AND 'cols' PROPERTIES**
        const galleryData = [
            // Tall/Vertical Images (Ratio 4:6), 1 column width
            { url: "2020.cht.png", alt: "Coupled Hierarchical Transformer", width: 400, height: 270, cols: 1 },
			{ url: "2021.hmcan.png", alt: "Hierarchical Multi-modal Contextual Attention Network", width: 400, height: 145, cols: 1 },
        ];


        const container = document.getElementById('masonry-container');
        const BASE_ROW_HEIGHT = 10; // Must match the CSS grid-auto-rows value

        // Modal Elements
        const imageModal = document.getElementById('image-modal');
        const closeModalButton = document.getElementById('close-modal-button');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        const modalImageContainer = document.getElementById('modal-image-container');

        // --- Modal Control Functions ---
        function openModal(item) {
            // Retrieve details from the separate object using 'alt' as the key
            const details = imageDetails[item.alt] || { caption: 'No caption available.', description: 'No detailed description available.' };

            // Set modal content
            modalTitle.textContent = item.alt;
            modalDescription.innerHTML = details.description; // Using 'description' for the main text
            
            // Recreate image element to display in modal (and make it rounded)
            // Increased max-h to 75vh to give large images more space to fit
            modalImageContainer.innerHTML = `<img src="${item.url}" alt="${item.alt}" class="max-w-full h-auto max-h-[75vh] object-contain rounded-lg shadow-md mb-2 mx-auto"/>`;

            // Display modal with transitions
            imageModal.classList.remove('hidden');
            imageModal.classList.add('flex');
            
            // Timeout to allow DOM repaint before applying transitions
            setTimeout(() => {
                imageModal.classList.remove('opacity-0');
                imageModal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        }

        function closeModal() {
            // Hide modal with transitions
            imageModal.classList.add('opacity-0');
            imageModal.querySelector('.modal-content').classList.add('scale-95');
            
            // Timeout to wait for transition to finish before setting display: none
            setTimeout(() => {
                imageModal.classList.add('hidden');
                imageModal.classList.remove('flex');
            }, 300);
        }

        function renderGallery() {
            container.innerHTML = ''; // Clear existing content
            // This is an estimate based on the CSS minmax(280px, 1fr) and grid structure.
            const ESTIMATED_COLUMN_WIDTH = 280; 
            
            galleryData.forEach(item => {
                const itemDiv = document.createElement('div');
                // Added cursor-pointer to indicate clickability
                itemDiv.className = 'masonry-item transition duration-300 cursor-pointer';
                
                const imageUrl = item.url; 
                
                // Use the explicit width, height, and new cols property
                const w = item.width || ESTIMATED_COLUMN_WIDTH; 
                const h = item.height || ESTIMATED_COLUMN_WIDTH; // Default to square if missing
                const cols = item.cols || 1; // Default to 1 column span

                // --- Masonry Layout Calculation ---
                itemDiv.style.gridColumnEnd = `span ${cols}`;

                const aspectRatio = h / w;
                const effectiveWidthForRatio = ESTIMATED_COLUMN_WIDTH * cols;
                const renderedHeight = effectiveWidthForRatio * aspectRatio;
                const rowSpan = Math.ceil(renderedHeight / BASE_ROW_HEIGHT);
                
                itemDiv.style.gridRowEnd = `span ${rowSpan}`;

                // Retrieve the short caption for the card overlay
                const cardCaption = (imageDetails[item.alt] && imageDetails[item.alt].caption) || item.alt;


                // --- Updated HTML: Removed hover description, added visible card title ---
                itemDiv.innerHTML = `
                    <div class="relative group">
                        <img src="${imageUrl}" alt="${item.alt}" class="w-full h-auto object-cover"/>
                        <!-- Item title visible on the card for context -->
                        <div class="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent">
                            <p class="text-white font-semibold text-sm truncate">${cardCaption}</p>
                        </div>
                    </div>
                `;
                
                // Add click listener to open the modal
                itemDiv.addEventListener('click', () => openModal(item));
                
                container.appendChild(itemDiv);
            });
        }

        // 1. Initial Render
        renderGallery();

        // 2. Attach Modal Event Listeners
        closeModalButton.addEventListener('click', closeModal);
        imageModal.addEventListener('click', (event) => {
            // Close if backdrop is clicked (target is the modal itself, not content)
            if (event.target === imageModal) {
                closeModal();
            }
        });

        // 3. Mobile Menu Toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when a link is clicked
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

    </script>

</body>
</html>
